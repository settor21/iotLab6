
<!DOCTYPE html>
<HTML>
<head>
  <link rel="stylesheet" href="style.css">
  <title>SENSOR</title>
  <style>
  .btn {display:block; width:200px; margin:auto; padding:10px}
  .btn {font-size:20px; color:black; text-decoration:none}
    .on {background-color:red}
    .off {background-color:blue}
  
    </style></head>
</head>
<body>
  <h1 style="color: blue;">Sensor Data</h1>
  <h1 text-align= "center"> </h1>
  <p style="font-size: 120%;">This page shows the storage 
    tanks in each house in Regimanuel Estate. Click any of the tanks to display last 5 water levels.</p>
  <body>



<button class="button-2" role="button" name="ESPLight1" onclick="updateByAJAX_ESP1Light()">ESP1: Light Intensity</button>
<div id="tankdbData"></div>

<button class="button-1" role="button" name="ESPdist1" onclick="updateByAJAX_ESP1distance()">ESP1: Distance</button>
<div id="Distance1"></div>

<br>
<br>

<button class="button-3" role="button" name="charlotte" onclick="updateByAJAX_charlotteData()">ESP2: Light Intensity</button>
<div id="charlotteData"></div>

<button class="button-1" role="button" name="charlotte" onclick="updateByAJAX_CurrT2()">ESP2: Distance</button>
<div id="CurrT2"></div>

    <br>
  <br>
<p style="font-size: 120%;"> Click to select manual mode of operation of motor</p>
  

<a href="http://192.168.137.204" class="button-1">ESP1 Motor Control</a>
<br>
<br>
<a href="http://192.168.137.204" class="button-1">ESP2 Motor Control</a>









<script type="text/javascript">

function updateByAJAX_ESP1Light(){
      const xhttp=new XMLHttpRequest();
      xhttp.onload=function(){
        document.getElementById("tankdbData").innerText=this.responseText;
      }
      
      xhttp.open("GET", "http://localhost/iotinhtdocs/midsemproject/iotMidsemProject/Retrievinglevel.php?");
      xhttp.send();
    }

function updateByAJAX_ESP1distance(){
      const xhttp=new XMLHttpRequest();
      xhttp.onload=function(){
        document.getElementById("Distance1").innerText=this.responseText;
      }
      
      xhttp.open("GET", "http://localhost/iotinhtdocs/ESP1_GetDistance.php?");
      xhttp.send();
}

function updateByAJAX_CurrT2(){
      const xhttp=new XMLHttpRequest();
      xhttp.onload=function(){
        document.getElementById("CurrT2").innerText=this.responseText;
      }
      
      xhttp.open("GET", "http://localhost/iotinhtdocs/midsemproject/iotMidsemProject/getlastTank2.php?");
      xhttp.send();
}

function updateByAJAX_charlotteData(){
    const xhttp=new XMLHttpRequest();
    xhttp.onload=function(){
        document.getElementById("charlotteData").innerText=this.responseText;
      }
      
      xhttp.open("GET", "http://localhost/iotinhtdocs/midsemproject/iotMidsemProject/RetrieveCharlotte.php?");
      xhttp.send();
    }



	function sendData(butn)
{
  var URL, variab, text;
  if(butn == 'Red LED')
  {
    URL = 'LEDRurl';
    variab = 'LEDR';
  }

  if(butn == 'manual')
{
 URL = 'manualurl';
  variab = 'manualState';
    
 }


  if(butn == 'Red LED')
{ // change button class and text 
  var state = document.getElementById(butn).className;
  state = (state == 'btn on' ? 'btn off' : 'btn on');
  text = (state == 'btn on' ? butn + 'OFF' : butn + ' ON');
    document.getElementById(butn).className = state;
    document.getElementById(butn).innerHTML = 'Press to turn ' + text;
  }
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(butn)
  {
    if (this.readyState == 4 && this.status == 200)

//   xhr.onload = function(){
    document.getElementById(variab).innerHTML = this.responseText;
  };
  xhr.open('GET', URL, true);
  xhr.send();
}

</script>




</body>

</HTML>
